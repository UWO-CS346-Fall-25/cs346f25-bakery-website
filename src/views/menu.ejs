<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title><%= title %> - CS346 Project</title>
  <link rel="stylesheet" href="/css/style.css">
  <script src="/js/newItemPopup.js" defer></script>
</head>
<body>
  <header>
    <nav>
      <div class="container">
        <a href="/" class="logo">Lambs Cafe and Bakery</a>
        <ul class="nav-links">
          <li><a href="/">Home</a></li>
          <li><a href="/menu">Menu</a></li>
          <li><a href="/recipe/today">Recipe Of The Day</a></li>
          <% if (user) { %>
            <li>
              <form action="/users/logout" method="POST" style="display: inline;">
                <input type="hidden" name="_csrf" value="<%= csrfToken %>">
                <button type="submit" class="btn-link">Logout</button>
              </form>
            </li>
          <% } else { %>
            <li><a href="/users/login">Login</a></li>
          <% } %>
        </ul>
      </div>
    </nav>
  </header>

  <main class="container">
    <section class="hero">
      <h1>Menu</h1>
    </section>

    <% if (user) { %>
      <div class="new-item-wrapper">
        <button id="new-menu-item">Add New Item</button>
      </div>
    <% } %>




    <div id="overlay"></div>

    <div id="add-item-popup">
      <h2>New Menu Item:</h2>
      <form action="/menu" method="POST" enctype="multipart/form-data">

        <input type="hidden" name="_csrf" value="<%= csrfToken %>">


        <div class="new-item-field">
          <select id="menu_type" name="menu_type">
            <option value="">-- Select menu item should appear on --</option>
            <option value="bakery">Bakery</option>
            <option value="food">Food</option>
            <option value="drink">Drink</option>
          </select>
        </div>
        <div class="new-item-field">
          <label>Item Name:</label>
          <input type="text" id="item-name" name="item_name" required>
        </div>

        <div class="new-item-field">
          <label>Size/Sevings:</label>
          <input type="text" id="item-servings" name="size_servings" required>
        </div>

        <div class="new-item-field">
          <label>Price: $</label>
          <input type="number" id="item-price" name="price" min="0" step="0.01" required>
        </div>

        <div class="new-item-field">
          <label>Calories:</label>
          <input type="number" id="item-calories" name="calories" min="0" required>
        </div>

        <div class="new-item-field">
          <label>Fat (g):</label>
          <input type="number" id="item-fat" name="fat" min="0" required>
        </div>

        <div class="new-item-field">
          <label>Sugar (g):</label>
          <input type="number" id="item-sugar" name="sugar" min="0" required>
        </div>

        <div class="new-item-field">
          <label>Protein (g):</label>
          <input type="number" id="item-protein" name="protein" min="0" required>
        </div>

        <div class="new-item-field">
          <label>Image:</label>
          <input type="file" name="img_url" id="imageUpload" accept="image/*" required/>
        </div>

        <button type="submit">Submit</button>
      </form>

      <button id="close-popup">X</button>
    </div>

    <div class="menu-row">
      <section class="menu-category">
        <h2><a href="/bakery-menu">Bakery Items</a></h2>
        <img src="img/bakery-items-image.jpg" alt="Bakery Item">
      </section>

      <section class="menu-category">
        <h2><a href="/foods-menu">Food Items</a></h2>
        <img src="img/foods-items-image.jpg" alt="Foods Item">
      </section>

      <section class="menu-category">
        <h2><a href="/drinks-menu">Drinks</a></h2>
        <img src="img/drinks-items-image.jpg" alt="Bakery Item">
      </section>
    </div>
    

  </main>

  <footer>
    <div class="container">
      <p>&copy; 2025 Lambs Cafe and Bakery. All rights reserved.</p>
    </div>
  </footer>

  <script src="/js/main.js"></script>
</body>
</html>